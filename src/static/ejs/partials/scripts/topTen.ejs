<script>
  const scanDataTop10Card = () => {
    const topIssuesList = document.getElementById('top-issues-list');

    scanData.topTenPagesWithMostIssues.forEach(page => {
      if (page.totalIssues !== 0) {
        const listItem = document.createElement('li');
        listItem.className = 'd-flex justify-content-between';

        const link = document.createElement('a');
        link.href = page.url;
        link.target = '_blank';
        link.rel = 'noopener';
        link.className = 'page-links';
        link.textContent = page.pageTitle.length > 0 ? page.pageTitle : page.url;
        link.title = link.textContent;
        link.setAttribute('aria-label', link.textContent);

        const issuesSpan = document.createElement('span');
        issuesSpan.className = 'ms-2 issues-badge';
        const issues = Number(page.totalIssues) || 0;
        const occ = Number(page.totalOccurrences) || 0;
        const issueWord = issues === 1 ? 'issue' : 'issues';
        const occWord = occ === 1 ? 'occurrence' : 'occurrences';
        issuesSpan.textContent = `${issues} ${issueWord} (${occ} occ.)`;
        issuesSpan.setAttribute('aria-label', `${issues} ${issueWord} (${occ} ${occWord})`);

        listItem.appendChild(link);
        listItem.appendChild(issuesSpan);
        topIssuesList.appendChild(listItem);
      }
    });
  };

  scanDataTop10Card();
</script>